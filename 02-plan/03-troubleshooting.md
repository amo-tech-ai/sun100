# 쏠라 플랫폼: 문제 해결 및 예방 가이드

**문서 상태:** 2024-08-29 게시됨
**작성자:** 수석 풀스택 아키텍트 및 시스템 분석가
**버전:** 1.0

---

## 개요

이 문서는 쏠라 플랫폼에서 발생했던 모든 과거 오류, 근본 원인, 위험 신호를 문서화하고 영구적인 해결책과 예방 규칙을 제공하기 위한 결정적인 가이드입니다. 이 가이드의 목표는 실수를 통해 배우고, 제도적 지식을 구축하며, 동일한 문제가 반복되지 않도록 보장하는 것입니다.

## 목차
1.  **과거 오류 전체 진단**
    *   AI 및 환경 오류
    *   라우팅 및 가져오기 오류
    *   스타일링 및 자산 오류
    *   Supabase 오류
    *   마법사 실패
2.  **쏠라 스택의 일반적인 오류**
    *   React + Vite, TypeScript, Tailwind, Supabase, Gemini 2.5, 배포
3.  **문제 해결 플레이북**
    *   단계별 진단 프레임워크
4.  **예방 규칙 및 황금률**
    *   쏠라 "다시는 안 돼" 예방 가이드
5.  **빠른 수정 치트 시트**

---

## 1. 과거 오류 전체 진단

### AI 및 환경 오류

| 오류 | 원인 | 발생 이유 | 기능에 미친 영향 | 해결책 | 예방 규칙 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **"API_KEY 환경 변수가 설정되지 않았습니다"** | 백엔드 환경(예: Supabase Edge Function)에서 `GEMINI_API_KEY` 비밀이 설정되지 않았습니다. | 로컬 개발(.env 파일)과 배포된 환경 간의 구성 불일치. | 모든 AI 기능(덱 생성, 콘텐츠 수정 등)이 401/403 인증 오류로 실패했습니다. | 1. Supabase 대시보드 또는 CLI를 사용하여 `GEMINI_API_KEY`를 비밀로 설정합니다. (`supabase secrets set GEMINI_API_KEY <값>`) <br/> 2. 비밀이 함수에 연결되었는지 확인합니다. | **비밀 관리:** 모든 비밀은 Supabase CLI를 통해 설정해야 하며, 배포 체크리스트의 일부로 확인해야 합니다. |
| **클라이언트 측에서 실수로 Gemini API 호출** | AI 로직이 프런트엔드(`aiService.ts`)에 구현되어 `VITE_GEMINI_API_KEY`를 노출했습니다. | 프로토타이핑 중 보안을 고려하지 않고 빠른 개발을 우선시했습니다. | **치명적인 보안 취약점.** API 키가 도난당하여 사기성 요금이 발생할 수 있었습니다. | 1. 모든 Gemini API 호출을 Supabase Edge Function으로 마이그레이션합니다. <br/> 2. 프런트엔드에서 API 키와 직접적인 AI 호출을 모두 제거합니다. | **백엔드 전용 비밀:** AI API 키는 **절대** 클라이언트 측 코드에 존재해서는 안 됩니다. 모든 AI 호출은 인증된 백엔드 엔드포인트를 통해 이루어져야 합니다. |
| **잘못 구성된 Edge Function** | 함수가 제대로 배포되지 않았거나, 경로 이름이 잘못되었거나, CORS 헤더가 누락되었습니다. | 배포 프로세스 중 단계 누락 또는 잘못된 구성. | 프런트엔드가 AI 백엔드를 호출할 수 없어 CORS 오류 또는 404 오류가 발생했습니다. | 1. `supabase functions deploy <이름>`을 사용하여 함수가 배포되었는지 확인합니다. <br/> 2. 함수 응답에 올바른 CORS 헤더(`'Access-Control-Allow-Origin': '*'`)가 포함되어 있는지 확인합니다. | **배포 스크립트:** 함수 배포 및 확인을 자동화하는 `package.json` 스크립트를 만듭니다. |

### 라우팅 및 가져오기 오류

| 오류 | 원인 | 발생 이유 | 기능에 미친 영향 | 해결책 | 예방 규칙 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **"모듈 지정자를 확인할 수 없습니다"** | 1. `src` 외부의 파일을 가져오려고 시도. <br/> 2. 잘못된 상대 경로. | 표준 Vite/React 프로젝트 구조를 위반했습니다. | 애플리케이션이 빌드되지 않거나 런타임에